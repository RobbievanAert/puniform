{
    "contents" : "#################################################################\n# P-UNIFORM FUNCTION WITH ONE-MEAN AND TWO-INDEPENDENT MEANS    #\n# MODIFICATIONS: METAFOR PACKAGE NO LONGER REQUIRED             #\n#################################################################\n\npuniform <- function(mi, ri, ni, sdi, m1i, m2i, n1i, n2i, sd1i, sd2i, alpha = .05, side, method, plot = FALSE, sim.pval = FALSE) {\n\n  ##### LOAD PACKAGES #####\n  require(ADGofTest)\n  require(truncnorm)\n\n  ##### LOAD FUNCTIONS #####\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/Program Files/escompute_1.R\")         ### Computing effect sizes\n\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/Program Files/pubbias_3.R\")           ### Publication bias test p-uniform\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/approx.R\")                            ### Computing extreme tail probabilities\n\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/Program Files/testeffect_1.R\")        ### Test of an effect p-uniform\n\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/Program Files/esest_1.R\")             ### Effect size estimation p-uniform\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/bounds.R\")                            ### Computing bounds for effect size estimation\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/bisect.R\")                            ### Bisection method\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/get.cv.P.R\")                          ### Critical values Irwin-Hall distribution\n\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/Program Files/plottrans.R\")           ### Plot p-values\n\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/Program Files/hetero.R\")              ### Test for homogeneity\n\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/Program Files/print.puniformoutput_1.R\")### Create output class\n\n  source(\"D:/Dropbox/Werk/Onderzoek/Code/Program Files/transform_1.R\")           ### Transform results\n\n  ##### COMPUTE EFFECT SIZE, VARIANCE, AND Z-VALUES PER STUDY #####\n  if(!missing(\"mi\") & !missing(\"ni\") & !missing(\"sdi\")) {\n    measure <- \"M\"\n    es <- escompute(mi = mi, ni = ni, sdi = sdi, side = side, measure = measure) ### Mean unknown sigma\n  } else if(!missing(\"m1i\") & !missing(\"m2i\") & !missing(\"n1i\") & !missing(\"n2i\") & !missing(\"sd1i\") & !missing(\"sd2i\")) {\n    measure <- \"MD\"\n    es <- escompute(m1i = m1i, m2i = m2i, n1i = n1i, n2i = n2i, sd1i = sd1i, sd2i = sd2i, side = side, measure = measure) ### Mean difference unknown sigma\n  } else if(!missing(\"ri\") & !missing(\"ni\")) {\n    measure <- \"COR\"\n    es <- escompute(ri = ri, ni = ni, side = side, measure = measure) ### Correlation\n  }\n\n  ##### PUBLICATION BIAS TEST #####\n  res1 <- pubbias(es = es, alpha = alpha, method = method)\n\n  ### If there are no significant studies return an error message\n  if(res1$ksig == 0) {\n    stop(\"No significant studies on the specified side\")\n  }\n\n  ##### TEST OF AN EFFECT #####\n  res2 <- testeffect(zval = res1$data$zval, ksig = res1$ksig, alpha = alpha, method = method)\n\n  ##### EFFECT SIZE ESTIMATION #####\n  res3 <- esest(yi = res1$data$yi, vi = res1$data$vi, zval = res1$data$zval, ksig = res1$ksig, alpha = alpha, method = method)\n\n  ##### PLOT ILLUSTRATING RELATIONSHIP BETWEEN OBSERVED AND EXPECTED P-VALUES #####\n  if(plot == TRUE) { plottrans(tr.q = res3$tr.q, ksig = res1$ksig) }\n\n  ##### TEST FOR HOMOGENEITY #####\n  res4 <- hetero(vi = res1$data$vi, est = res3$est, ksig = res1$ksig, tr.q = res3$tr.q, alpha = alpha, method = method, sim.pval = sim.pval)\n\n  ##### MIRROR OR TRANSFORM RESULTS #####\n  res5 <- transform(res1 = res1, res3 = res3, side = side, measure = measure)\n\n  ##### CREATE OUTPUT #####\n  x <- list(method = method, est = res5$est, ci.lb = res5$ci.lb, ci.ub = res5$ci.ub, ksig = res1$ksig, approx.est = res3$approx.est,\n            approx.ci.lb = res3$approx.ci.lb, L.het = res4$L.het, pval.het = res4$pval.het, cor.pval = res4$cor.pval,\n            L.0 = res2$L.0, pval.0 = res2$pval.0, approx.0.imp = res2$approx.0.imp, L.pb = res1$L.pb, pval.pb = res1$pval.pb,\n            approx.pb = res1$approx.pb, est.fe = res5$est.fe, se.fe = res5$se.fe, zval.fe = res5$zval.fe, pval.fe = res1$pval.fe, ci.lb.fe = res5$ci.lb.fe, \n            ci.ub.fe = res5$ci.ub.fe, Qstat = res1$Qstat, Qpval = res1$Qpval)\n  \n  class(x) <- \"puniformoutput\"\n  return(x)\n\n}\n\npuniform(mi = c(-0.2,-0.2), ni = c(100,100), sdi = c(1,1), alpha = 0.05, method = \"P\", sim.pval = FALSE, plot = FALSE, side = \"left\")\npuniform(mi = c(0.2,0.2), ni = c(100,100), sdi = c(1,1), alpha = 0.05, method = \"P\", plot = FALSE, side = \"right\")\n\n\npuniform(mi = c(-0.2,-0.2), ni = c(100,100), sdi = c(1,1), alpha = 0.05, method = \"P\", sim.pval = FALSE, plot = FALSE, side = \"left\")\n\npuniform(ri = c(-0.2,-0.2), ni = c(100,100), alpha = 0.05, method = \"P\", sim.pval = FALSE, plot = FALSE, side = \"left\")\n\n",
    "created" : 1428928816437.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "520746563",
    "id" : "AB6DE9C5",
    "lastKnownWriteTime" : 1428929291,
    "path" : "D:/Dropbox/Werk/Onderzoek/Code/Program Files/puniform_compleet_7.R",
    "project_path" : null,
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}